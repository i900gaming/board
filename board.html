<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lokales Sprint Board</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600&display=swap" rel="stylesheet">
  <script type="module" src="script.js"></script>
</head>
<body>
	
  <h1 id="boardTitle" onclick="openBoardTitlePopup()">Sprint Board</h1>
  <div><select id="parentSelect" style="display: none;"></select></div>
  
  <div class="import-export-buttons">
  
   <!-- Auth Bereich -->
	<div class="auth-wrapper">
		<h3>Login</h3>
		<input type="email" id="loginEmail" placeholder="E-Mail">
		<input type="password" id="loginPassword" placeholder="Passwort">
		<button onclick="loginWithEmail()">Anmelden</button>
		<button onclick="registerWithEmail()">Registrieren</button>
		<button onclick="logout()">Abmelden</button>
		<div id="authStatus">Nicht eingeloggt</div>
	</div>
	<!-- Board Verwaltung -->
	<div class="board-switcher">
		<input type="text" id="boardIdInput" placeholder="Board-Name z.â€¯B. 'Sprint01'">
		<button onclick="saveCurrentBoard()">ğŸ“¤ Save</button>
		<button onclick="loadSelectedBoard()">ğŸ“¥ Load</button>
		<button onclick="listBoardsInFirebase()">ğŸ”„ Liste</button>
	</div>
	<div class="board-list-wrapper">
		<h3>ğŸ“‚ Gespeicherte Boards</h3>
		<div id="boardList" class="board-list"></div>
	</div>
	
	
	<input type="text" id="boardIdInput" placeholder="Board-Name" />
	<button onclick="saveBoardToFirebase(document.getElementById('boardIdInput').value)">Save</button>
	<button onclick="loadBoardFromFirebase(document.getElementById('boardIdInput').value)">Load</button>
	<button onclick="listBoardsInFirebase()">Liste anzeigen</button>
	<div id="boardList"></div>
	  
	<button onclick="saveNewFile()">Save As New</button>
	<button onclick="openFile()">Open</button>
    <button onclick="toggleEditMode()" id="editToggleButton">Edit</button>
    <button onclick="toggleCollapseAll()" id="collapseToggleButton">Collapse</button>
	<div class="current-file-info">Aktuelle Datei: <span id="currentFileNameDisplay">â€“</span></div>
  </div>

	<div class="board">
		<div class="column" id="ToDo">
		  <h2>ToDo <button onclick="addEmptyParentToColumn('ToDo')" title="Neuen Parent in ToDo anlegen">+</button></h2>
		</div>
		<div class="column" id="OnHold"><h2>OnHold</h2></div>
		<div class="column" id="InProgress"><h2>InProgress</h2></div>
		<div class="column" id="Done"><h2>Done</h2></div>
	</div>
		<!-- Parent bearbeiten -->
		<div id="parentEditOverlay" class="popup-overlay">
		  <div class="popup">
			<h2>Parent bearbeiten</h2>
			<div class="popup-body">
			  <label>Name</label>
			  <input type="text" id="parentEditName">
			  <label>Farbe</label>
			  <input type="color" id="parentEditColor">
			</div>
			<div class="popup-buttons">
			  <button onclick="saveParentEdit()">Speichern</button>
			  <button onclick="deleteParent()">LÃ¶schen</button>
			  <button onclick="closeParentEdit()">SchlieÃŸen</button>
			</div>
		  </div>
		</div>
		
		<!-- Task bearbeiten -->
		<div id="taskEditOverlay" class="popup-overlay">
		  <div class="popup">
			<h2>Task bearbeiten</h2>
			<div class="popup-body">
			  <label>Beschreibung</label>
			  <input type="text" id="taskEditDesc">
			  <label>Parent</label>
			  <select id="taskEditParent"></select>
			  <label>FÃ¤lligkeitsdatum</label>
			  <input type="date" id="taskEditDueDate">
			</div>
			<div class="popup-buttons">
			  <button onclick="saveTaskEdit()">Speichern</button>
			  <button onclick="deleteCurrent()">LÃ¶schen</button>
			  <button onclick="closeTaskEdit()">SchlieÃŸen</button>
			</div>
		  </div>
		</div>
		<!-- Titel bearbeiten -->
		<div id="titleEditOverlay" class="popup-overlay">
		  <div class="popup">
			<h2>Titel bearbeiten</h2>
			<div class="popup-body">
			  <label>Neuer Titel</label>
			  <input type="text" id="boardTitleInput">
			</div>
			<div class="popup-buttons">
			  <button onclick="saveBoardTitle()">Speichern</button>
			  <button onclick="closeTitleEdit()">SchlieÃŸen</button>
			</div>
		  </div>
		</div>
		
		<!-- Subtask umbenennen -->
		<div id="subtaskEditOverlay" class="popup-overlay">
		  <div class="popup">
			<h2>Subtask umbenennen</h2>
			<div class="popup-body">
			  <label>Neuer Name</label>
			  <input type="text" id="subtaskEditInput">
			</div>
			<div class="popup-buttons">
			  <button onclick="saveSubtaskEdit()">Speichern</button>
			  <button onclick="closeSubtaskEdit()">SchlieÃŸen</button>
			</div>
		  </div>
		</div>

<div id="notification" class="notification-toast">Datei gespeichert.</div>


</body>
</html>
